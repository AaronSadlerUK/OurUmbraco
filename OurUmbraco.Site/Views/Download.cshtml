@inherits UmbracoTemplatePage
@using ClientDependency.Core.Mvc
@using OurUmbraco.Release
@{
    Layout = "~/Views/Master.cshtml";
    Html.RequiresCss("~/css/releases.css");
    var latestRelease = Download.GetCurrentReleaseFromFile();
}

<style>
/**
 * Component: Overlay
 */
    .overlay-backdrop {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        overflow-x: hidden;
        overflow-y: auto;
        outline: 0;
        z-index: 1000;
        background: rgba(0, 0, 0, 0.75);
    }
    #overlay-content {
        position: fixed;
        top: 50%;
        left: 50%;
        height: auto;
        z-index: 3501;
        -webkit-transform: translate(-50%, -50%);
        -ms-transform: translate(-50%, -50%);
        -o-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
        width: 80%;
    }
    #overlay-content .overlay-inner {
        overflow: hidden;
        position: relative;
        opacity: 0;
        -webkit-transition: all 0.3s;
        -o-transition: all 0.3s;
        transition: all 0.3s;
    }
    #overlay-content .overlay-inner-scroll {
        webkit-overflow-scrolling: touch;
    }
    #overlay-content.active .overlay-inner {
        opacity: 1;
    }
    .overlay-close {
        cursor: pointer;
        background: #ffffff;
        color: #000000;
        position: absolute;
        top: -15px;
        right: -15px;
        display: block;
        width: 30px;
        height: 30px;
        line-height: 30px;
        padding: 1px 0 0;
        z-index: 1;
        text-align: center;
        font-weight: bold;
        text-decoration: none;
        border-radius: 50%;
    }
    .overlay-close:hover {
        text-decoration: none;
        background: #e6e6e6;
    }
    .overlay-close__icon {
        fill: currentColor;
        width: 14px;
        height: 14px;
    }
    .overlay-inner-scroll {
        padding-bottom: 56.25%;
        height: 0;
        position: relative;
        overflow: hidden;
    }
    .overlay-inner-scroll iframe {
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
</style>

<section id="download" class="download-umbraco">
    <div class="container">
        <div class="row" style="margin-top: 60px;">
            <div class="col-md-6 col-padding">
                <h2>Looking to try Umbraco?</h2>
                <p class="download-teaser large-margin-bottom">
                    Umbraco Cloud is the easiest and fastest way to use Umbraco yet with full support for all your custom .NET code
                    and intergrations. You're up and running in less than a minute and your life will be made easier with automated upgrades 
                    and a built-in deployment engine.
                </p>

                <div class="large-margin-bottom">
                    <a class="button green" href="https://umbraco.com/">Sign up on umbraco.com</a>
                </div>
                
                <p>
                    Powered by Microsoft Azure. No credit card needed. Free 14 day trial and pricing starts at just 25 EUR including hosting.
                </p>
                
                <p>
                    When you want to intergrate custom .NET code, you can clone it to your local machine as it's all powered by Git and even
                    comes with a powerful deployment setup out of the box, that lets you deploy new iterations of your site with the click
                    of a button. See how it works:
                </p>
                <div class="video video-element" data-video="172382998">
                    <img src="https://umbraco.com/media/1001/video-thumb.jpg?mode=crop&quality=75&height=378.921875&width=720" alt="See how Umbraco Cloud works"/>
                    <span class="video-overlay"></span>
                    <div class="play">
                        <svg class="icon--play icon--white"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/images/icons.svg#play"></use></svg>
                    </div>
                </div>
            </div>
            
            <!-- Download Umbraco Column -->
            <div class="col-md-6 col-padding">
                <h2>Download Umbraco</h2>
                <p class="download-teaser large-margin-bottom">
                    If you want to DIY you can download Umbraco either as a ZIP file or via NuGet.
                    It's the same version of Umbraco CMS that powers Umbraco cloud, but you'll need to find
                    a place to host yourself and handling deployments and upgrades is all down to you.
                </p>
                <p>
                <pre class="pre small-margin-bottom"><span>PM></span> Install-Package UmbracoCms</pre>
                <p class="large-margin-bottom">
                    Current Version: 
                    <a class="download-link" href="/contribute/releases/@(latestRelease.version.Replace(".", string.Empty))?fromdownload=true">Download @(latestRelease.version)</a>
                    -  See all <a class="download-link" href="/contribute/releases/">previous releases</a>
                </p>
                
                <p class="medium-margin-bottom">
                    We recommend using Microsoft Visual Studio 2015+ or Microsoft Visual Studio Code
                    with the IIS Express plugin. Make sure to check the full <a href="/documentation/Getting-Started/Setup/Install/">installation guide</a>
                </p>

                <div class="requirements">
                    <strong>Requirements:</strong>
                    <ul>
                        <li>Microsoft Windows 10+ or Microsoft Windows Server 2012+</li>
                        <li>Microsoft IIS or Microsoft IIS Express</li>
                        <li>Microsoft SQL Express 2014+ or Microsoft SQL Server 2014+</li>
                        <li>Microsoft ASP.NET 4.6+</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Does this work -->
<section id="install" class="download-umbraco" style="display: none">
    <div class="mac-notice">
        You're running MacOS, follow <a href="">this guide.</a>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                <div class="dl-content steps">
                    <h2>Almost there</h2>
                    <div class="guide">
                        <div class="step step-one">
                            <span>1</span>
                            <div>Unzip</div>
                        </div>
                        <div class="step step-two">
                            <span>2</span>
                            <div>Run with VS Code & IIS Express</div>
                        </div>
                        <div class="step step-three">
                            <span>3</span>
                            <div>Follow the installer</div>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <!-- insert gif here -->
                </div>
            </div>
        </div>
    </div>
    <div class="archive">
        See detailed instructions in the <a href="/documentation/Getting-Started/Setup/Install/">documentation</a>
    </div>
</section>

    



@section EndScripts {

<script src="https://cdn.rawgit.com/MohammadYounes/jquery-scrollLock/master/jquery-scrollLock.js"></script>    
    <script>
        var umbraco = umbraco || {};
        umbraco.video = umbraco.video || function() {
            function e() {
                $(".video-element").on("click",
                    function() {
                        var e = $(this).data("video");
                        if (e) {
                            var o = $('<iframe width="1200" height="674" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>')
                                .attr("src", "https://player.vimeo.com/video/" + e + "?autoplay=1&color=ffffff&title=0&byline=0&portrait=0");

                            umbraco.overlay.create({
                                content: o,
                                class: "overlay--video"
                            });
                        }
                    });
            }
            return {
                init: e
            }
        }();

        var umbraco = umbraco || {};
        umbraco.overlay = umbraco.overlay ||
            function() {
                function e() {
                    1 !== $("#overlay-backdrop").length && ($("body").append('<div id="overlay-backdrop" class="overlay-backdrop"></div>'),
                        $("#overlay-backdrop").height($("body").height()),
                        $("#overlay-backdrop").on("click", function() {
                            n();
                        }), $(document).keyup(function(e) {
                            27 === e.keyCode && n();
                        }));
                }

                function o(o) {
                    1 === $("#overlay").length ? $("#overlay, #overlay-content").remove() : e();
                    var t = $('<a><svg class="overlay-close__icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/images/icons.svg#cross"></use></svg></a>').attr({
                            href: "#",
                            class: "overlay-close",
                            id: "closeOverlay"
                        }),
                        i = $("<div>").addClass("overlay-inner")
                            .append($("<div>").addClass("overlay-inner-scroll").append(o.content));
                    $("body").append($("<div>").attr("id", "overlay-content").append(t).append(i).fadeIn("fast")),
                        setTimeout(function() {
                                $("#overlay-content").addClass("active")
                            },
                            100), void 0 !== o.class && $("#overlay-content").addClass(o.class), $("#closeOverlay").on(
                            "click",
                            function(e) {
                                e.preventDefault(), n();
                            })
                }

                function n() {
                    1 === $("#overlay-backdrop").length &&
                        ($(".open").removeClass("open"), $("#overlay-backdrop, #overlay-content").remove());
                }

                return {
                    backdrop: e,
                    create: o,
                    destroy: n
                }
            }();

        $(function() {
            umbraco.video.init();
        });
    </script>
}
